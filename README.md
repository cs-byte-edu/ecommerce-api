- [C—Ç—Ä—É–∫—Ç—É—Ä–∞ CMS Strapi](#c—Ç—Ä—É–∫—Ç—É—Ä–∞-cms-strapi)
  - [Collection Types](#collection-types)
    - [Collection Type - Cart](#collection-type---cart)
  - [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–æ–ª—ñ–≤](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–ø–æ–ª—ñ–≤)
    - [1. users\_permissions\_user](#1-users_permissions_user)
      - [–û–ø–∏—Å](#–æ–ø–∏—Å)
      - [–û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ](#–æ—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ)
      - [–ü—Ä–∏–∫–ª–∞–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è](#–ø—Ä–∏–∫–ª–∞–¥-–≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è)
    - [2. cart\_items](#2-cart_items)
      - [–û–ø–∏—Å](#–æ–ø–∏—Å-1)
      - [–û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ](#–æ—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ-1)
      - [–ü—Ä–∏–∫–ª–∞–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è](#–ø—Ä–∏–∫–ª–∞–¥-–≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è-1)
    - [3. payment\_status](#3-payment_status)
      - [–û–ø–∏—Å](#–æ–ø–∏—Å-2)
      - [–ó–Ω–∞—á–µ–Ω–Ω—è](#–∑–Ω–∞—á–µ–Ω–Ω—è)
      - [–û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ](#–æ—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ-2)
      - [–ü—Ä–∏–∫–ª–∞–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è](#–ø—Ä–∏–∫–ª–∞–¥-–≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è-2)
  - [–ü–æ–≤–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–∏—Ö](#–ø–æ–≤–Ω–∞-—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–¥–∞–Ω–∏—Ö)
    - [TypeScript Interface](#typescript-interface)
    - [JSON Schema Example](#json-schema-example)
  - [–ë–∞–∑–æ–≤—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó CRUD](#–±–∞–∑–æ–≤—ñ-–æ–ø–µ—Ä–∞—Ü—ñ—ó-crud)
    - [Create (–°—Ç–≤–æ—Ä–µ–Ω–Ω—è)](#create-—Å—Ç–≤–æ—Ä–µ–Ω–Ω—è)
    - [Read (–ß–∏—Ç–∞–Ω–Ω—è)](#read-—á–∏—Ç–∞–Ω–Ω—è)
    - [Update (–û–Ω–æ–≤–ª–µ–Ω–Ω—è)](#update-–æ–Ω–æ–≤–ª–µ–Ω–Ω—è)
    - [Delete (–í–∏–¥–∞–ª–µ–Ω–Ω—è)](#delete-–≤–∏–¥–∞–ª–µ–Ω–Ω—è)
  - [–ó–≤'—è–∑–∫–∏ –∑ —ñ–Ω—à–∏–º–∏ –º–æ–¥–µ–ª—è–º–∏](#–∑–≤—è–∑–∫–∏-–∑-—ñ–Ω—à–∏–º–∏-–º–æ–¥–µ–ª—è–º–∏)
    - [1. User (plugin::users-permissions.user)](#1-user-pluginusers-permissionsuser)
    - [2. Cart Items (api::cart-item.cart-item)](#2-cart-items-apicart-itemcart-item)
  - [–Ü–Ω–¥–µ–∫—Å–∏ —Ç–∞ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è](#—ñ–Ω–¥–µ–∫—Å–∏-—Ç–∞-–æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è)
    - [–†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω—ñ —ñ–Ω–¥–µ–∫—Å–∏](#—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω—ñ-—ñ–Ω–¥–µ–∫—Å–∏)
  - [–ë—ñ–∑–Ω–µ—Å-–ª–æ–≥—ñ–∫–∞](#–±—ñ–∑–Ω–µ—Å-–ª–æ–≥—ñ–∫–∞)
    - [–ñ–∏—Ç—Ç—î–≤–∏–π —Ü–∏–∫–ª –∫–æ—à–∏–∫–∞](#–∂–∏—Ç—Ç—î–≤–∏–π-—Ü–∏–∫–ª-–∫–æ—à–∏–∫–∞)
    - [–ü—Ä–∞–≤–∏–ª–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó](#–ø—Ä–∞–≤–∏–ª–∞-–≤–∞–ª—ñ–¥–∞—Ü—ñ—ó)
  - [–ü—Ä–∏–∫–ª–∞–¥–∏ –∑–∞–ø–∏—Ç—ñ–≤](#–ø—Ä–∏–∫–ª–∞–¥–∏-–∑–∞–ø–∏—Ç—ñ–≤)
    - [GraphQL](#graphql)
    - [REST API](#rest-api)
  - [–ü—Ä–∏–º—ñ—Ç–∫–∏ –±–µ–∑–ø–µ–∫–∏](#–ø—Ä–∏–º—ñ—Ç–∫–∏-–±–µ–∑–ø–µ–∫–∏)
- [–ü—É–±–ª—ñ—á–Ω—ñ API –µ–Ω–¥–ø–æ—ó–Ω—Ç–∏](#–ø—É–±–ª—ñ—á–Ω—ñ-api-–µ–Ω–¥–ø–æ—ó–Ω—Ç–∏)
    - [–ö–æ—à–∏–∫ –ø–æ–∫—É–ø–æ–∫](#–∫–æ—à–∏–∫-–ø–æ–∫—É–ø–æ–∫)
    - [–ï–Ω–¥–ø–æ—ñ–Ω—Ç–∏](#–µ–Ω–¥–ø–æ—ñ–Ω—Ç–∏)
    - [1. –û—Ç—Ä–∏–º–∞—Ç–∏ –∫–æ—à–∏–∫ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞](#1-–æ—Ç—Ä–∏–º–∞—Ç–∏-–∫–æ—à–∏–∫-–∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞)
      - [–ü–∞—Ä–∞–º–µ—Ç—Ä–∏ –∑–∞–ø–∏—Ç—É](#–ø–∞—Ä–∞–º–µ—Ç—Ä–∏-–∑–∞–ø–∏—Ç—É)
      - [–ó–∞–≥–æ–ª–æ–≤–∫–∏](#–∑–∞–≥–æ–ª–æ–≤–∫–∏)
      - [–í—ñ–¥–ø–æ–≤—ñ–¥—å —É—Å–ø—ñ—Ö—É (200)](#–≤—ñ–¥–ø–æ–≤—ñ–¥—å-—É—Å–ø—ñ—Ö—É-200)
      - [–í—ñ–¥–ø–æ–≤—ñ–¥—å —è–∫—â–æ –∫–æ—à–∏–∫ –ø–æ—Ä–æ–∂–Ω—ñ–π (200)](#–≤—ñ–¥–ø–æ–≤—ñ–¥—å-—è–∫—â–æ-–∫–æ—à–∏–∫-–ø–æ—Ä–æ–∂–Ω—ñ–π-200)
    - [2. –î–æ–¥–∞—Ç–∏ —Ç–æ–≤–∞—Ä –≤ –∫–æ—à–∏–∫](#2-–¥–æ–¥–∞—Ç–∏-—Ç–æ–≤–∞—Ä-–≤-–∫–æ—à–∏–∫)
      - [–ü–∞—Ä–∞–º–µ—Ç—Ä–∏ –∑–∞–ø–∏—Ç—É (Body)](#–ø–∞—Ä–∞–º–µ—Ç—Ä–∏-–∑–∞–ø–∏—Ç—É-body)
      - [–ó–∞–≥–æ–ª–æ–≤–∫–∏](#–∑–∞–≥–æ–ª–æ–≤–∫–∏-1)
      - [–í—ñ–¥–ø–æ–≤—ñ–¥—å —É—Å–ø—ñ—Ö—É (200)](#–≤—ñ–¥–ø–æ–≤—ñ–¥—å-—É—Å–ø—ñ—Ö—É-200-1)
      - [–ú–æ–∂–ª–∏–≤—ñ –ø–æ–º–∏–ª–∫–∏](#–º–æ–∂–ª–∏–≤—ñ-–ø–æ–º–∏–ª–∫–∏)
    - [3. –û–Ω–æ–≤–∏—Ç–∏ –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Ç–æ–≤–∞—Ä—É](#3-–æ–Ω–æ–≤–∏—Ç–∏-–∫—ñ–ª—å–∫—ñ—Å—Ç—å-—Ç–æ–≤–∞—Ä—É)
      - [–ü–∞—Ä–∞–º–µ—Ç—Ä–∏ –∑–∞–ø–∏—Ç—É (Body)](#–ø–∞—Ä–∞–º–µ—Ç—Ä–∏-–∑–∞–ø–∏—Ç—É-body-1)
      - [–ó–∞–≥–æ–ª–æ–≤–∫–∏](#–∑–∞–≥–æ–ª–æ–≤–∫–∏-2)
      - [–í—ñ–¥–ø–æ–≤—ñ–¥—å —É—Å–ø—ñ—Ö—É (200)](#–≤—ñ–¥–ø–æ–≤—ñ–¥—å-—É—Å–ø—ñ—Ö—É-200-2)
      - [–í—ñ–¥–ø–æ–≤—ñ–¥—å –ø—Ä–∏ –≤–∏–¥–∞–ª–µ–Ω–Ω—ñ (quantity = 0)](#–≤—ñ–¥–ø–æ–≤—ñ–¥—å-–ø—Ä–∏-–≤–∏–¥–∞–ª–µ–Ω–Ω—ñ-quantity--0)
      - [–ú–æ–∂–ª–∏–≤—ñ –ø–æ–º–∏–ª–∫–∏](#–º–æ–∂–ª–∏–≤—ñ-–ø–æ–º–∏–ª–∫–∏-1)
    - [4. –û—á–∏—Å—Ç–∏—Ç–∏ –∫–æ—à–∏–∫](#4-–æ—á–∏—Å—Ç–∏—Ç–∏-–∫–æ—à–∏–∫)
      - [–ü–∞—Ä–∞–º–µ—Ç—Ä–∏ –∑–∞–ø–∏—Ç—É](#–ø–∞—Ä–∞–º–µ—Ç—Ä–∏-–∑–∞–ø–∏—Ç—É-1)
      - [–ó–∞–≥–æ–ª–æ–≤–∫–∏](#–∑–∞–≥–æ–ª–æ–≤–∫–∏-3)
      - [–í—ñ–¥–ø–æ–≤—ñ–¥—å —É—Å–ø—ñ—Ö—É (200)](#–≤—ñ–¥–ø–æ–≤—ñ–¥—å-—É—Å–ø—ñ—Ö—É-200-3)
      - [–í—ñ–¥–ø–æ–≤—ñ–¥—å —è–∫—â–æ –∫–æ—à–∏–∫ –≤–∂–µ –ø–æ—Ä–æ–∂–Ω—ñ–π (200)](#–≤—ñ–¥–ø–æ–≤—ñ–¥—å-—è–∫—â–æ-–∫–æ—à–∏–∫-–≤–∂–µ-–ø–æ—Ä–æ–∂–Ω—ñ–π-200)
      - [–ú–æ–∂–ª–∏–≤—ñ –ø–æ–º–∏–ª–∫–∏](#–º–æ–∂–ª–∏–≤—ñ-–ø–æ–º–∏–ª–∫–∏-2)
    - [5. –í–∏–¥–∞–ª–∏—Ç–∏ —Ç–æ–≤–∞—Ä –∑ –∫–æ—à–∏–∫–∞](#5-–≤–∏–¥–∞–ª–∏—Ç–∏-—Ç–æ–≤–∞—Ä-–∑-–∫–æ—à–∏–∫–∞)
      - [–ü–∞—Ä–∞–º–µ—Ç—Ä–∏ URL](#–ø–∞—Ä–∞–º–µ—Ç—Ä–∏-url)
      - [–ó–∞–≥–æ–ª–æ–≤–∫–∏](#–∑–∞–≥–æ–ª–æ–≤–∫–∏-4)
      - [–í—ñ–¥–ø–æ–≤—ñ–¥—å —É—Å–ø—ñ—Ö—É (200)](#–≤—ñ–¥–ø–æ–≤—ñ–¥—å-—É—Å–ø—ñ—Ö—É-200-4)
      - [–ú–æ–∂–ª–∏–≤—ñ –ø–æ–º–∏–ª–∫–∏](#–º–æ–∂–ª–∏–≤—ñ-–ø–æ–º–∏–ª–∫–∏-3)
    - [6. –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è –≥–æ—Å—Ç—å–æ–≤–æ–≥–æ –∫–æ—à–∏–∫–∞](#6-—Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è-–≥–æ—Å—Ç—å–æ–≤–æ–≥–æ-–∫–æ—à–∏–∫–∞)
      - [–ü–∞—Ä–∞–º–µ—Ç—Ä–∏ –∑–∞–ø–∏—Ç—É (Body)](#–ø–∞—Ä–∞–º–µ—Ç—Ä–∏-–∑–∞–ø–∏—Ç—É-body-2)
      - [–ó–∞–≥–æ–ª–æ–≤–∫–∏](#–∑–∞–≥–æ–ª–æ–≤–∫–∏-5)
      - [–í—ñ–¥–ø–æ–≤—ñ–¥—å —É—Å–ø—ñ—Ö—É (200)](#–≤—ñ–¥–ø–æ–≤—ñ–¥—å-—É—Å–ø—ñ—Ö—É-200-5)
      - [–°—Ç–∞—Ç—É—Å–∏ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó](#—Å—Ç–∞—Ç—É—Å–∏-—Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó)
      - [–ú–æ–∂–ª–∏–≤—ñ –ø–æ–º–∏–ª–∫–∏](#–º–æ–∂–ª–∏–≤—ñ-–ø–æ–º–∏–ª–∫–∏-4)
  - [–ö–æ–¥–∏ –ø–æ–º–∏–ª–æ–∫](#–∫–æ–¥–∏-–ø–æ–º–∏–ª–æ–∫)
  - [–ü—Ä–∏–∫–ª–∞–¥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è](#–ø—Ä–∏–∫–ª–∞–¥–∏-–≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è)
    - [–î–æ–¥–∞–≤–∞–Ω–Ω—è —Ç–æ–≤–∞—Ä—É –≤ –∫–æ—à–∏–∫ (JavaScript)](#–¥–æ–¥–∞–≤–∞–Ω–Ω—è-—Ç–æ–≤–∞—Ä—É-–≤-–∫–æ—à–∏–∫-javascript)
    - [–û—Ç—Ä–∏–º–∞–Ω–Ω—è –∫–æ—à–∏–∫–∞ (cURL)](#–æ—Ç—Ä–∏–º–∞–Ω–Ω—è-–∫–æ—à–∏–∫–∞-curl)
    - [–û—á–∏—â–µ–Ω–Ω—è –∫–æ—à–∏–∫–∞ (Fetch API)](#–æ—á–∏—â–µ–Ω–Ω—è-–∫–æ—à–∏–∫–∞-fetch-api)
  - [–ü—Ä–∏–º—ñ—Ç–∫–∏](#–ø—Ä–∏–º—ñ—Ç–∫–∏)
  - [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–∏—Ö](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–¥–∞–Ω–∏—Ö)
    - [Cart (–ö–æ—à–∏–∫)](#cart-–∫–æ—à–∏–∫)
    - [CartItem (–ï–ª–µ–º–µ–Ω—Ç –∫–æ—à–∏–∫–∞)](#cartitem-–µ–ª–µ–º–µ–Ω—Ç-–∫–æ—à–∏–∫–∞)
    - [Product (–¢–æ–≤–∞—Ä)](#product-—Ç–æ–≤–∞—Ä)

# C—Ç—Ä—É–∫—Ç—É—Ä–∞ CMS Strapi

## Collection Types

### Collection Type - Cart

**Collection Name:** `carts`  
**Singular Name:** `cart`  
**Plural Name:** `carts`  
**Display Name:** Cart  
**Type:** Collection Type  

**–ü–∞—Ä–∞–º–µ—Ç—Ä–∏:**
- ‚úÖ Draft & Publish –≤–∫–ª—é—á–µ–Ω–æ
- üîÑ –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ –≤–µ—Ä—Å—ñ–π (draft/published)

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–æ–ª—ñ–≤

### 1. users_permissions_user

**–¢–∏–ø:** `relation`  
**–ó–≤'—è–∑–æ–∫:** `oneToOne` (–æ–¥–∏–Ω –¥–æ –æ–¥–Ω–æ–≥–æ)  
**–¶—ñ–ª—å:** `plugin::users-permissions.user`

#### –û–ø–∏—Å
–ó–≤'—è–∑–æ–∫ –∑ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–µ–º, —è–∫–æ–º—É –Ω–∞–ª–µ–∂–∏—Ç—å –∫–æ—à–∏–∫. –ö–æ–∂–µ–Ω –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –º–æ–∂–µ –º–∞—Ç–∏ –ª–∏—à–µ –æ–¥–∏–Ω –∞–∫—Ç–∏–≤–Ω–∏–π –∫–æ—à–∏–∫.

#### –û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ
- –£–Ω—ñ–∫–∞–ª—å–Ω–∏–π –∑–≤'—è–∑–æ–∫ (–æ–¥–∏–Ω –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á = –æ–¥–∏–Ω –∫–æ—à–∏–∫)
- –û–±–æ–≤'—è–∑–∫–æ–≤–µ –ø–æ–ª–µ –¥–ª—è —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó –≤–ª–∞—Å–Ω–∏–∫–∞
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó –∫–æ—à–∏–∫—ñ–≤ –ø–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É

#### –ü—Ä–∏–∫–ª–∞–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è
```javascript
// –ó–Ω–∞–π—Ç–∏ –∫–æ—à–∏–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
const userCart = await strapi.entityService.findMany('api::cart.cart', {
  filters: { users_permissions_user: userId },
  populate: { users_permissions_user: true }
});
```

---

### 2. cart_items

**–¢–∏–ø:** `relation`  
**–ó–≤'—è–∑–æ–∫:** `oneToMany` (–æ–¥–∏–Ω –¥–æ –±–∞–≥–∞—Ç—å–æ—Ö)  
**–¶—ñ–ª—å:** `api::cart-item.cart-item`  
**Mapped By:** `cart`

#### –û–ø–∏—Å
–ö–æ–ª–µ–∫—Ü—ñ—è —Ç–æ–≤–∞—Ä—ñ–≤, —â–æ –∑–Ω–∞—Ö–æ–¥—è—Ç—å—Å—è –≤ –∫–æ—à–∏–∫—É. –û–¥–∏–Ω –∫–æ—à–∏–∫ –º–æ–∂–µ –º—ñ—Å—Ç–∏—Ç–∏ –±–∞–≥–∞—Ç–æ –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ (cart-items).

#### –û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ
- –î–≤–æ—Å—Ç–æ—Ä–æ–Ω–Ω—ñ–π –∑–≤'—è–∑–æ–∫ –∑ cart-item
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –æ–Ω–æ–≤–ª—é—î—Ç—å—Å—è –ø—Ä–∏ –¥–æ–¥–∞–≤–∞–Ω–Ω—ñ/–≤–∏–¥–∞–ª–µ–Ω–Ω—ñ cart-items
- –ü—ñ–¥—Ç—Ä–∏–º—É—î –ø–æ–≤–Ω—É –ø–æ–ø—É–ª—è—Ü—ñ—é –≤–∫–ª–∞–¥–µ–Ω–∏—Ö –¥–∞–Ω–∏—Ö

#### –ü—Ä–∏–∫–ª–∞–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è
```javascript
// –û—Ç—Ä–∏–º–∞—Ç–∏ –∫–æ—à–∏–∫ –∑ —É—Å—ñ–º–∞ —Ç–æ–≤–∞—Ä–∞–º–∏
const cartWithItems = await strapi.entityService.findOne('api::cart.cart', cartId, {
  populate: {
    cart_items: {
      populate: {
        product: {
          populate: ['image', 'brand']
        }
      }
    }
  }
});
```

---

### 3. payment_status

**–¢–∏–ø:** `enumeration`  
**–ú–æ–∂–ª–∏–≤—ñ –∑–Ω–∞—á–µ–Ω–Ω—è:**
- `active` (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º)
- `complete`

#### –û–ø–∏—Å
–°—Ç–∞—Ç—É—Å –∫–æ—à–∏–∫–∞, —â–æ –≤–∏–∑–Ω–∞—á–∞—î –π–æ–≥–æ –ø–æ—Ç–æ—á–Ω–∏–π —Å—Ç–∞–Ω —É –ø—Ä–æ—Ü–µ—Å—ñ –ø–æ–∫—É–ø–∫–∏.

#### –ó–Ω–∞—á–µ–Ω–Ω—è

| –ó–Ω–∞—á–µ–Ω–Ω—è | –û–ø–∏—Å | –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è |
|----------|------|--------------|
| `active` | –ê–∫—Ç–∏–≤–Ω–∏–π –∫–æ—à–∏–∫ | –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –¥–æ–¥–∞—î/–≤–∏–¥–∞–ª—è—î —Ç–æ–≤–∞—Ä–∏ |
| `complete` | –ó–∞–≤–µ—Ä—à–µ–Ω–∏–π –∫–æ—à–∏–∫ | –ó–∞–º–æ–≤–ª–µ–Ω–Ω—è –æ—Ñ–æ—Ä–º–ª–µ–Ω–æ, –∫–æ—à–∏–∫ –∞—Ä—Ö—ñ–≤–æ–≤–∞–Ω–∏–π |

#### –û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ
- –ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º –≤—Å—Ç–∞–Ω–æ–≤–ª—é—î—Ç—å—Å—è `active`
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó –∞–∫—Ç–∏–≤–Ω–∏—Ö –∫–æ—à–∏–∫—ñ–≤
- –ü—ñ—Å–ª—è –æ—Ñ–æ—Ä–º–ª–µ–Ω–Ω—è –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è —Å—Ç–∞—Ç—É—Å –∑–º—ñ–Ω—é—î—Ç—å—Å—è –Ω–∞ `complete`

#### –ü—Ä–∏–∫–ª–∞–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è
```javascript
// –ó–Ω–∞–π—Ç–∏ —Ç—ñ–ª—å–∫–∏ –∞–∫—Ç–∏–≤–Ω–∏–π –∫–æ—à–∏–∫ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
const activeCart = await strapi.entityService.findMany('api::cart.cart', {
  filters: { 
    users_permissions_user: userId,
    payment_status: 'active'
  }
});

// –ó–∞–≤–µ—Ä—à–∏—Ç–∏ –∫–æ—à–∏–∫ –ø—ñ—Å–ª—è –æ–ø–ª–∞—Ç–∏
await strapi.entityService.update('api::cart.cart', cartId, {
  data: { payment_status: 'complete' }
});
```

---

## –ü–æ–≤–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–∏—Ö

### TypeScript Interface

```typescript
interface Cart {
  id: number;
  documentId: string;
  
  // –û—Å–Ω–æ–≤–Ω—ñ –ø–æ–ª—è
  users_permissions_user: {
    id: number;
    username: string;
    email: string;
  };
  
  cart_items: CartItem[];
  
  payment_status: 'active' | 'complete';
  
  // –°–∏—Å—Ç–µ–º–Ω—ñ –ø–æ–ª—è Strapi
  createdAt: string;
  updatedAt: string;
  publishedAt: string | null;
  createdBy?: User;
  updatedBy?: User;
}

interface CartItem {
  id: number;
  documentId: string;
  cart: Cart;
  product: Product;
  quantity: number;
  price_at_time: number;
}
```

### JSON Schema Example

```json
{
  "id": 1,
  "documentId": "abc123xyz789",
  "users_permissions_user": {
    "id": 15,
    "documentId": "user456",
    "username": "john_doe",
    "email": "john@example.com"
  },
  "cart_items": [
    {
      "id": 1,
      "documentId": "item123",
      "quantity": 2,
      "price_at_time": 299.99,
      "product": {
        "id": 5,
        "documentId": "prod789",
        "name": "iPhone 15 Pro",
        "price": 299.99,
        "stockQuantity": 25
      }
    }
  ],
  "payment_status": "active",
  "createdAt": "2024-01-15T10:30:00.000Z",
  "updatedAt": "2024-01-15T14:25:00.000Z",
  "publishedAt": "2024-01-15T10:30:00.000Z"
}
```

---

## –ë–∞–∑–æ–≤—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó CRUD

### Create (–°—Ç–≤–æ—Ä–µ–Ω–Ω—è)

```javascript
// –°—Ç–≤–æ—Ä–∏—Ç–∏ –Ω–æ–≤–∏–π –∫–æ—à–∏–∫ –¥–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
const newCart = await strapi.entityService.create('api::cart.cart', {
  data: {
    users_permissions_user: userId,
    payment_status: 'active'
  }
});
```

### Read (–ß–∏—Ç–∞–Ω–Ω—è)

```javascript
// –û—Ç—Ä–∏–º–∞—Ç–∏ –∫–æ—à–∏–∫ –∑ –ø–æ–≤–Ω–æ—é –ø–æ–ø—É–ª—è—Ü—ñ—î—é
const cart = await strapi.entityService.findOne('api::cart.cart', cartId, {
  populate: {
    users_permissions_user: {
      fields: ['username', 'email']
    },
    cart_items: {
      populate: {
        product: {
          populate: ['image', 'brand', 'category']
        }
      }
    }
  }
});
```

### Update (–û–Ω–æ–≤–ª–µ–Ω–Ω—è)

```javascript
// –û–Ω–æ–≤–∏—Ç–∏ —Å—Ç–∞—Ç—É—Å –∫–æ—à–∏–∫–∞
const updatedCart = await strapi.entityService.update('api::cart.cart', cartId, {
  data: {
    payment_status: 'complete'
  }
});
```

### Delete (–í–∏–¥–∞–ª–µ–Ω–Ω—è)

```javascript
// –í–∏–¥–∞–ª–∏—Ç–∏ –∫–æ—à–∏–∫ (—Ä—ñ–¥–∫–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è)
await strapi.entityService.delete('api::cart.cart', cartId);
```

---

## –ó–≤'—è–∑–∫–∏ –∑ —ñ–Ω—à–∏–º–∏ –º–æ–¥–µ–ª—è–º–∏

### 1. User (plugin::users-permissions.user)
- **–¢–∏–ø –∑–≤'—è–∑–∫—É:** One-to-One
- **–û–ø–∏—Å:** –ö–æ–∂–µ–Ω –∫–æ—à–∏–∫ –Ω–∞–ª–µ–∂–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É
- **–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:** –Ü–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è –≤–ª–∞—Å–Ω–∏–∫–∞ –∫–æ—à–∏–∫–∞

### 2. Cart Items (api::cart-item.cart-item)
- **–¢–∏–ø –∑–≤'—è–∑–∫—É:** One-to-Many  
- **–û–ø–∏—Å:** –û–¥–∏–Ω –∫–æ—à–∏–∫ –º—ñ—Å—Ç–∏—Ç—å –±–∞–≥–∞—Ç–æ —Ç–æ–≤–∞—Ä—ñ–≤
- **–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:** –ó–±–µ—Ä—ñ–≥–∞–Ω–Ω—è —Ç–æ–≤–∞—Ä—ñ–≤ —Ç–∞ —ó—Ö –∫—ñ–ª—å–∫–æ—Å—Ç—ñ

---

## –Ü–Ω–¥–µ–∫—Å–∏ —Ç–∞ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è

### –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω—ñ —ñ–Ω–¥–µ–∫—Å–∏

```sql
-- –Ü–Ω–¥–µ–∫—Å –¥–ª—è —à–≤–∏–¥–∫–æ–≥–æ –ø–æ—à—É–∫—É –∫–æ—à–∏–∫–∞ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
CREATE INDEX idx_cart_user_status ON carts (users_permissions_user, payment_status);

-- –Ü–Ω–¥–µ–∫—Å –¥–ª—è –ø–æ—à—É–∫—É –∞–∫—Ç–∏–≤–Ω–∏—Ö –∫–æ—à–∏–∫—ñ–≤
CREATE INDEX idx_cart_status ON carts (payment_status);

-- –Ü–Ω–¥–µ–∫—Å –¥–ª—è —Å–æ—Ä—Ç—É–≤–∞–Ω–Ω—è –ø–æ –¥–∞—Ç—ñ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è
CREATE INDEX idx_cart_created ON carts (created_at);
```

---

## –ë—ñ–∑–Ω–µ—Å-–ª–æ–≥—ñ–∫–∞

### –ñ–∏—Ç—Ç—î–≤–∏–π —Ü–∏–∫–ª –∫–æ—à–∏–∫–∞

```mermaid
graph LR
    A[–°—Ç–≤–æ—Ä–µ–Ω–Ω—è] --> B[Active]
    B --> C[–î–æ–¥–∞–≤–∞–Ω–Ω—è —Ç–æ–≤–∞—Ä—ñ–≤]
    C --> B
    B --> D[–û—Ñ–æ—Ä–º–ª–µ–Ω–Ω—è –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è]
    D --> E[Complete]
    E --> F[–ê—Ä—Ö—ñ–≤—É–≤–∞–Ω–Ω—è]
```

### –ü—Ä–∞–≤–∏–ª–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó

1. **–£–Ω—ñ–∫–∞–ª—å–Ω—ñ—Å—Ç—å –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∫–æ—à–∏–∫–∞:**
   ```javascript
   // –û–¥–∏–Ω –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –º–æ–∂–µ –º–∞—Ç–∏ –ª–∏—à–µ –æ–¥–∏–Ω –∞–∫—Ç–∏–≤–Ω–∏–π –∫–æ—à–∏–∫
   const existingActiveCart = await strapi.entityService.findMany('api::cart.cart', {
     filters: { 
       users_permissions_user: userId,
       payment_status: 'active'
     }
   });
   ```

2. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è:**
   ```javascript
   // –Ø–∫—â–æ —É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –Ω–µ–º–∞—î –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∫–æ—à–∏–∫–∞ - —Å—Ç–≤–æ—Ä–∏—Ç–∏
   if (!existingActiveCart.length) {
     await strapi.entityService.create('api::cart.cart', {
       data: {
         users_permissions_user: userId,
         payment_status: 'active'
       }
     });
   }
   ```

---

## –ü—Ä–∏–∫–ª–∞–¥–∏ –∑–∞–ø–∏—Ç—ñ–≤

### GraphQL
```graphql
query GetUserCart($userId: ID!) {
  carts(filters: { 
    users_permissions_user: { id: { eq: $userId } },
    payment_status: { eq: "active" }
  }) {
    data {
      id
      documentId
      payment_status
      cart_items {
        data {
          id
          quantity
          price_at_time
          product {
            data {
              name
              price
              image {
                data {
                  attributes {
                    url
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
```

### REST API
```bash
# –û—Ç—Ä–∏–º–∞—Ç–∏ –∞–∫—Ç–∏–≤–Ω–∏–π –∫–æ—à–∏–∫ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
GET /api/carts?filters[users_permissions_user][$eq]=15&filters[payment_status][$eq]=active&populate=*

# –°—Ç–≤–æ—Ä–∏—Ç–∏ –Ω–æ–≤–∏–π –∫–æ—à–∏–∫
POST /api/carts
{
  "data": {
    "users_permissions_user": 15,
    "payment_status": "active"
  }
}

# –û–Ω–æ–≤–∏—Ç–∏ —Å—Ç–∞—Ç—É—Å –∫–æ—à–∏–∫–∞  
PUT /api/carts/1
{
  "data": {
    "payment_status": "complete"
  }
}
```

---

## –ü—Ä–∏–º—ñ—Ç–∫–∏ –±–µ–∑–ø–µ–∫–∏

1. **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è:** –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ –ø–æ–≤–∏–Ω–Ω—ñ –º–∞—Ç–∏ –¥–æ—Å—Ç—É–ø –ª–∏—à–µ –¥–æ —Å–≤–æ—ó—Ö –∫–æ—à–∏–∫—ñ–≤
2. **–í–∞–ª—ñ–¥–∞—Ü—ñ—è:** –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –∫–æ—à–∏–∫–∞ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É –ø–µ—Ä–µ–¥ –æ–ø–µ—Ä–∞—Ü—ñ—è–º–∏
3. **–ü–æ–ª—ñ—Ç–∏–∫–∏:** –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è permissions –¥–ª—è –æ–±–º–µ–∂–µ–Ω–Ω—è –¥–æ—Å—Ç—É–ø—É

```javascript
// –ü—Ä–∏–∫–ª–∞–¥ –ø–æ–ª—ñ—Ç–∏–∫–∏ –±–µ–∑–ø–µ–∫–∏
module.exports = async (policyContext, config, { strapi }) => {
  const { user } = policyContext.state;
  const cartId = policyContext.params.id;
  
  const cart = await strapi.entityService.findOne('api::cart.cart', cartId);
  
  return cart.users_permissions_user === user.id;
};
```



# –ü—É–±–ª—ñ—á–Ω—ñ API –µ–Ω–¥–ø–æ—ó–Ω—Ç–∏

### –ö–æ—à–∏–∫ –ø–æ–∫—É–ø–æ–∫

**Base URL:** `/api`  
**–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è:** Bearer Token (JWT)  
**Content-Type:** `application/json`

---

### –ï–Ω–¥–ø–æ—ñ–Ω—Ç–∏

### 1. –û—Ç—Ä–∏–º–∞—Ç–∏ –∫–æ—à–∏–∫ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞

**GET** `/cart`

–ü–æ–≤–µ—Ä—Ç–∞—î –ø–æ—Ç–æ—á–Ω–∏–π –∫–æ—à–∏–∫ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –∑ —É—Å—ñ–º–∞ —Ç–æ–≤–∞—Ä–∞–º–∏.

#### –ü–∞—Ä–∞–º–µ—Ç—Ä–∏ –∑–∞–ø–∏—Ç—É
–ù–µ–º–∞—î

#### –ó–∞–≥–æ–ª–æ–≤–∫–∏
```
Authorization: Bearer <jwt_token>
```

#### –í—ñ–¥–ø–æ–≤—ñ–¥—å —É—Å–ø—ñ—Ö—É (200)
```json
{
  "cart": {
    "id": 1,
    "documentId": "abc123",
    "users_permissions_user": 1,
    "createdAt": "2024-01-15T10:30:00.000Z",
    "updatedAt": "2024-01-15T12:45:00.000Z"
  },
  "cart_items": [
    {
      "id": 1,
      "documentId": "item123",
      "quantity": 2,
      "price_at_time": 299.99,
      "product": {
        "id": 1,
        "documentId": "prod123",
        "name": "iPhone 15",
        "price": 299.99,
        "stockQuantity": 50,
        "brand": {
          "name": "Apple"
        }
      }
    }
  ]
}
```

#### –í—ñ–¥–ø–æ–≤—ñ–¥—å —è–∫—â–æ –∫–æ—à–∏–∫ –ø–æ—Ä–æ–∂–Ω—ñ–π (200)
```json
{
  "cart": null,
  "cart_items": []
}
```

---

### 2. –î–æ–¥–∞—Ç–∏ —Ç–æ–≤–∞—Ä –≤ –∫–æ—à–∏–∫

**POST** `/cart/add`

–î–æ–¥–∞—î —Ç–æ–≤–∞—Ä –≤ –∫–æ—à–∏–∫ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –∞–±–æ –∑–±—ñ–ª—å—à—É—î –∫—ñ–ª—å–∫—ñ—Å—Ç—å —ñ—Å–Ω—É—é—á–æ–≥–æ —Ç–æ–≤–∞—Ä—É.

#### –ü–∞—Ä–∞–º–µ—Ç—Ä–∏ –∑–∞–ø–∏—Ç—É (Body)
```json
{
  "productId": "qf3878zap321vh8gfzywfoae", // –æ–±–æ–≤'—è–∑–∫–æ–≤–æ
  "quantity": 1 // –æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ, –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º 1
}
```

#### –ó–∞–≥–æ–ª–æ–≤–∫–∏
```
Authorization: Bearer <jwt_token>
Content-Type: application/json
```

#### –í—ñ–¥–ø–æ–≤—ñ–¥—å —É—Å–ø—ñ—Ö—É (200)
```json
{
  "updatedCart": {
    "id": 1,
    "documentId": "cart123",
    "cart_items": [
      {
        "id": 1,
        "documentId": "item123",
        "quantity": 3,
        "price_at_time": 299.99,
        "product": {
          "id": 1,
          "documentId": "prod123",
          "name": "iPhone 15",
          "price": 299.99,
          "image": {
            "url": "/uploads/iphone.jpg",
            "alternativeText": "iPhone 15"
          },
          "brand": {
            "name": "Apple"
          }
        }
      }
    ]
  }
}
```

#### –ú–æ–∂–ª–∏–≤—ñ –ø–æ–º–∏–ª–∫–∏
- **400** - Product ID is required
- **404** - Product not found  
- **400** - Sorry, we don't have enough stock at the moment
- **500** - Error adding to cart

---

### 3. –û–Ω–æ–≤–∏—Ç–∏ –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Ç–æ–≤–∞—Ä—É

**PUT** `/cart/update-quantity`

–û–Ω–æ–≤–ª—é—î –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–æ–≤–∞—Ä—É –≤ –∫–æ—à–∏–∫—É.

#### –ü–∞—Ä–∞–º–µ—Ç—Ä–∏ –∑–∞–ø–∏—Ç—É (Body)
```json
{
  "productId": "qf3878zap321vh8gfzywfoae", // –æ–±–æ–≤'—è–∑–∫–æ–≤–æ
  "quantity": 5 // –æ–±–æ–≤'—è–∑–∫–æ–≤–æ, —è–∫—â–æ 0 - —Ç–æ–≤–∞—Ä –≤–∏–¥–∞–ª—è—î—Ç—å—Å—è
}
```

#### –ó–∞–≥–æ–ª–æ–≤–∫–∏
```
Authorization: Bearer <jwt_token>
Content-Type: application/json
```

#### –í—ñ–¥–ø–æ–≤—ñ–¥—å —É—Å–ø—ñ—Ö—É (200)
```json
{
  "updatedCart": {
    "id": 1,
    "documentId": "cart123",
    "cart_items": [
      {
        "id": 1,
        "documentId": "item123",
        "quantity": 5,
        "price_at_time": 299.99,
        "product": {
          "id": 1,
          "documentId": "prod123",
          "name": "iPhone 15",
          "price": 299.99,
          "image": {
            "url": "/uploads/iphone.jpg",
            "alternativeText": "iPhone 15"
          },
          "brand": {
            "name": "Apple"
          }
        }
      }
    ]
  },
  "message": "–ö—ñ–ª—å–∫—ñ—Å—Ç—å –æ–Ω–æ–≤–ª–µ–Ω–æ"
}
```

#### –í—ñ–¥–ø–æ–≤—ñ–¥—å –ø—Ä–∏ –≤–∏–¥–∞–ª–µ–Ω–Ω—ñ (quantity = 0)
```json
{
  "message": "–¢–æ–≤–∞—Ä –≤–∏–¥–∞–ª–µ–Ω–æ –∑ –∫–æ—à–∏–∫–∞"
}
```

#### –ú–æ–∂–ª–∏–≤—ñ –ø–æ–º–∏–ª–∫–∏
- **400** - ID —Ç–æ–≤–∞—Ä—É —Ç–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –æ–±–æ–≤'—è–∑–∫–æ–≤—ñ
- **400** - –ö—ñ–ª—å–∫—ñ—Å—Ç—å –Ω–µ –º–æ–∂–µ –±—É—Ç–∏ –Ω–µ–≥–∞—Ç–∏–≤–Ω–æ—é
- **404** - –ö–æ—à–∏–∫ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ
- **404** - –¢–æ–≤–∞—Ä –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ –≤ –∫–æ—à–∏–∫—É
- **400** - –ù–µ–¥–æ—Å—Ç–∞—Ç–Ω—å–æ —Ç–æ–≤–∞—Ä—É –Ω–∞ —Å–∫–ª–∞–¥—ñ

---

### 4. –û—á–∏—Å—Ç–∏—Ç–∏ –∫–æ—à–∏–∫

**DELETE** `/cart/clear`

–í–∏–¥–∞–ª—è—î –≤—Å—ñ —Ç–æ–≤–∞—Ä–∏ –∑ –∫–æ—à–∏–∫–∞ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞.

#### –ü–∞—Ä–∞–º–µ—Ç—Ä–∏ –∑–∞–ø–∏—Ç—É
–ù–µ–º–∞—î

#### –ó–∞–≥–æ–ª–æ–≤–∫–∏
```
Authorization: Bearer <jwt_token>
```

#### –í—ñ–¥–ø–æ–≤—ñ–¥—å —É—Å–ø—ñ—Ö—É (200)
```json
{
  "success": true,
  "message": "–ö–æ—à–∏–∫ –æ—á–∏—â–µ–Ω–æ",
  "cartId": "cart123"
}
```

#### –í—ñ–¥–ø–æ–≤—ñ–¥—å —è–∫—â–æ –∫–æ—à–∏–∫ –≤–∂–µ –ø–æ—Ä–æ–∂–Ω—ñ–π (200)
```json
{
  "success": true,
  "message": "–ö–æ—à–∏–∫ –≤–∂–µ –ø–æ—Ä–æ–∂–Ω—ñ–π"
}
```

#### –ú–æ–∂–ª–∏–≤—ñ –ø–æ–º–∏–ª–∫–∏
- **401** - –ü–æ—Ç—Ä—ñ–±–Ω–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è
- **500** - –ü–æ–º–∏–ª–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

---

### 5. –í–∏–¥–∞–ª–∏—Ç–∏ —Ç–æ–≤–∞—Ä –∑ –∫–æ—à–∏–∫–∞

**DELETE** `/cart/remove/:productId`

–í–∏–¥–∞–ª—è—î –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏–π —Ç–æ–≤–∞—Ä –∑ –∫–æ—à–∏–∫–∞.

#### –ü–∞—Ä–∞–º–µ—Ç—Ä–∏ URL
- `productId` - Document ID —Ç–æ–≤–∞—Ä—É –¥–ª—è –≤–∏–¥–∞–ª–µ–Ω–Ω—è

#### –ó–∞–≥–æ–ª–æ–≤–∫–∏
```
Authorization: Bearer <jwt_token>
```

#### –í—ñ–¥–ø–æ–≤—ñ–¥—å —É—Å–ø—ñ—Ö—É (200)
```json
{
  "success": true,
  "message": "–¢–æ–≤–∞—Ä –≤–∏–¥–∞–ª–µ–Ω–æ –∑ –∫–æ—à–∏–∫–∞"
}
```

#### –ú–æ–∂–ª–∏–≤—ñ –ø–æ–º–∏–ª–∫–∏
- **401** - –ü–æ—Ç—Ä—ñ–±–Ω–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è
- **404** - –ö–æ—à–∏–∫ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ
- **404** - –ï–ª–µ–º–µ–Ω—Ç –∫–æ—à–∏–∫–∞ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ
- **500** - –ü–æ–º–∏–ª–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

---

### 6. –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è –≥–æ—Å—Ç—å–æ–≤–æ–≥–æ –∫–æ—à–∏–∫–∞

**POST** `/cart/sync-guest`

–°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑—É—î —Ç–æ–≤–∞—Ä–∏ –∑ –≥–æ—Å—Ç—å–æ–≤–æ–≥–æ –∫–æ—à–∏–∫–∞ –∑ –∫–æ—à–∏–∫–æ–º –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞.

#### –ü–∞—Ä–∞–º–µ—Ç—Ä–∏ –∑–∞–ø–∏—Ç—É (Body)
```json
{
  "guestCartItems": [
    {
      "productId": "prod123",
      "quantity": 2
    },
    {
      "productId": "prod456", 
      "quantity": 1
    }
  ]
}
```

#### –ó–∞–≥–æ–ª–æ–≤–∫–∏
```
Authorization: Bearer <jwt_token>
Content-Type: application/json
```

#### –í—ñ–¥–ø–æ–≤—ñ–¥—å —É—Å–ø—ñ—Ö—É (200)
```json
{
  "message": "–°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞",
  "results": [
    {
      "productId": "prod123",
      "status": "merged",
      "message": "–ö—ñ–ª—å–∫—ñ—Å—Ç—å –∑–±—ñ–ª—å—à–µ–Ω–æ"
    },
    {
      "productId": "prod456",
      "status": "added", 
      "message": "–¢–æ–≤–∞—Ä –¥–æ–¥–∞–Ω–æ"
    }
  ]
}
```

#### –°—Ç–∞—Ç—É—Å–∏ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó
- `added` - –¢–æ–≤–∞—Ä –¥–æ–¥–∞–Ω–æ –≤ –∫–æ—à–∏–∫
- `merged` - –ö—ñ–ª—å–∫—ñ—Å—Ç—å –∑–±—ñ–ª—å—à–µ–Ω–æ (—Ç–æ–≤–∞—Ä –≤–∂–µ –±—É–≤ –≤ –∫–æ—à–∏–∫—É)
- `partial` - –î–æ–¥–∞–Ω–æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –º–æ–∂–ª–∏–≤—É –∫—ñ–ª—å–∫—ñ—Å—Ç—å
- `error` - –ü–æ–º–∏–ª–∫–∞ (—Ç–æ–≤–∞—Ä –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ –∞–±–æ –Ω–µ–¥–æ—Å—Ç–∞—Ç–Ω—å–æ –Ω–∞ —Å–∫–ª–∞–¥—ñ)

#### –ú–æ–∂–ª–∏–≤—ñ –ø–æ–º–∏–ª–∫–∏
- **400** - –ù–µ–∫–æ—Ä–µ–∫—Ç–Ω—ñ –¥–∞–Ω—ñ –≥–æ—Å—Ç—å–æ–≤–æ–≥–æ –∫–æ—à–∏–∫–∞
- **500** - –ü–æ–º–∏–ª–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó

---

## –ö–æ–¥–∏ –ø–æ–º–∏–ª–æ–∫

| –ö–æ–¥ | –ó–Ω–∞—á–µ–Ω–Ω—è | –û–ø–∏—Å |
|-----|----------|------|
| 200 | OK | –ó–∞–ø–∏—Ç –≤–∏–∫–æ–Ω–∞–Ω–æ —É—Å–ø—ñ—à–Ω–æ |
| 400 | Bad Request | –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ –∑–∞–ø–∏—Ç—É |
| 401 | Unauthorized | –ü–æ—Ç—Ä—ñ–±–Ω–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è |
| 404 | Not Found | –†–µ—Å—É—Ä—Å –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ |
| 500 | Internal Server Error | –í–Ω—É—Ç—Ä—ñ—à–Ω—è –ø–æ–º–∏–ª–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ |

---

## –ü—Ä–∏–∫–ª–∞–¥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

### –î–æ–¥–∞–≤–∞–Ω–Ω—è —Ç–æ–≤–∞—Ä—É –≤ –∫–æ—à–∏–∫ (JavaScript)

```javascript
const response = await fetch('/api/cart/add', {
  method: 'POST',
  headers: {
    'Authorization': `Bearer ${token}`,
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    productId: 'qf3878zap321vh8gfzywfoae',
    quantity: 2
  })
});

const data = await response.json();
console.log(data.updatedCart);
```

### –û—Ç—Ä–∏–º–∞–Ω–Ω—è –∫–æ—à–∏–∫–∞ (cURL)

```bash
curl -X GET "http://localhost:1337/api/cart" \
  -H "Authorization: Bearer YOUR_JWT_TOKEN" \
  -H "Content-Type: application/json"
```

### –û—á–∏—â–µ–Ω–Ω—è –∫–æ—à–∏–∫–∞ (Fetch API)

```javascript
const response = await fetch('/api/cart/clear', {
  method: 'DELETE',
  headers: {
    'Authorization': `Bearer ${token}`
  }
});

const result = await response.json();
console.log(result.message); // "–ö–æ—à–∏–∫ –æ—á–∏—â–µ–Ω–æ"
```

---

## –ü—Ä–∏–º—ñ—Ç–∫–∏

1. **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è**: –í—Å—ñ –µ–Ω–¥–ø–æ—ñ–Ω—Ç–∏ –≤–∏–º–∞–≥–∞—é—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó —á–µ—Ä–µ–∑ JWT —Ç–æ–∫–µ–Ω
2. **Document ID**: Strapi v5 –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î `documentId` –¥–ª—è —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó –∑–∞–ø–∏—Å—ñ–≤
3. **–ü–æ–ø—É–ª—è—Ü—ñ—è**: –í—ñ–¥–ø–æ–≤—ñ–¥—ñ –≤–∫–ª—é—á–∞—é—Ç—å –ø–æ–≤–Ω—É —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ —Ç–æ–≤–∞—Ä–∏, –±—Ä–µ–Ω–¥–∏ —Ç–∞ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è
4. **–í–∞–ª—ñ–¥–∞—Ü—ñ—è**: API –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—î –Ω–∞—è–≤–Ω—ñ—Å—Ç—å —Ç–æ–≤–∞—Ä—É –Ω–∞ —Å–∫–ª–∞–¥—ñ
5. **–ö–µ—à—É–≤–∞–Ω–Ω—è**: –†–µ–∫–æ–º–µ–Ω–¥—É—î—Ç—å—Å—è –∫–µ—à—É–≤–∞—Ç–∏ –¥–∞–Ω—ñ –∫–æ—à–∏–∫–∞ –Ω–∞ –∫–ª—ñ—î–Ω—Ç—ñ –¥–ª—è –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è UX

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–∏—Ö

### Cart (–ö–æ—à–∏–∫)
```typescript
interface Cart {
  id: number;
  documentId: string;
  users_permissions_user: number;
  payment_status?: string;
  createdAt: string;
  updatedAt: string;
  cart_items: CartItem[];
}
```

### CartItem (–ï–ª–µ–º–µ–Ω—Ç –∫–æ—à–∏–∫–∞)
```typescript
interface CartItem {
  id: number;
  documentId: string;
  quantity: number;
  price_at_time: number;
  product: Product;
}
```

### Product (–¢–æ–≤–∞—Ä)
```typescript
interface Product {
  id: number;
  documentId: string;
  name: string;
  price: number;
  stockQuantity: number;
  image?: {
    url: string;
    alternativeText?: string;
  };
  brand?: {
    name: string;
  };
}
```
